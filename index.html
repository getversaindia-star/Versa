<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Versa | Next-Gen Digital Services</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        dark: '#0f172a',
                        glass: 'rgba(255, 255, 255, 0.05)',
                        'glass-border': 'rgba(255, 255, 255, 0.1)',
                        neon: '#06b6d4', // Cyan
                        primary: '#6366f1' // Indigo
                    },
                    fontFamily: {
                        sans: ['Outfit', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    
    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Firebase SDK (Modular) -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut, updateProfile } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc, collection, addDoc, query, where, onSnapshot, serverTimestamp, increment } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyChvXPTDBq15r0_5oCNE7yL5mwT8YNdOMc",
            authDomain: "versa-29f14.firebaseapp.com",
            projectId: "versa-29f14",
            storageBucket: "versa-29f14.firebasestorage.app",
            messagingSenderId: "665463922036",
            appId: "1:665463922036:web:d4c00a63ebc0c65689a021",
            measurementId: "G-DC1KSTS624"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        let currentUser = null;
        let userData = null;
        let servicesConfig = {
            software: ["CapCut", "After Effects", "Premiere Pro", "Canva", "Photoshop", "Figma"],
            editingTypes: ["Motion Graphic", "Cinematic", "Short Form", "Vlog"],
            designTypes: ["Logo", "Poster", "Thumbnail", "UI/UX"],
            devTypes: ["Web Development", "App Development", "Scripting"]
        };

        const views = {
            home: document.getElementById('view-home'),
            services: document.getElementById('view-services'),
            dashboard: document.getElementById('view-dashboard'),
            contact: document.getElementById('view-contact')
        };
        
        const modals = {
            login: document.getElementById('modal-login'),
            payment: document.getElementById('modal-payment'),
            booking: document.getElementById('modal-booking')
        };

        // --- Auth ---
        window.googleLogin = async () => {
            const provider = new GoogleAuthProvider();
            try {
                await signInWithPopup(auth, provider);
                toggleModal('login', false);
                showToast("Welcome to the Future of Digital.", "success");
            } catch (error) {
                console.error(error);
                // Friendly error for preview environment
                if(error.code === 'auth/unauthorized-domain') {
                    showToast("Domain not authorized in Firebase Console.", "error");
                } else {
                    showToast(error.message, "error");
                }
            }
        };

        window.logout = async () => {
            await signOut(auth);
            window.location.reload();
        };

        onAuthStateChanged(auth, async (user) => {
            currentUser = user;
            updateNavUI();

            if (user) {
                const userRef = doc(db, "users", user.uid);
                const docSnap = await getDoc(userRef);

                if (!docSnap.exists()) {
                    await setDoc(userRef, {
                        uid: user.uid,
                        email: user.email,
                        displayName: user.displayName,
                        photoURL: user.photoURL,
                        avatarId: "user",
                        trialsUsed: 0,
                        isPremium: false,
                        createdAt: serverTimestamp()
                    });
                    userData = { trialsUsed: 0, isPremium: false, avatarId: "user" };
                } else {
                    userData = docSnap.data();
                }
                loadUserOrders();
                updateProfileUI();
            }
        });

        // --- Core Logic ---
        window.initiateBooking = async () => {
            if (!currentUser) {
                toggleModal('login', true);
                return;
            }
            // Refresh Data
            const userRef = doc(db, "users", currentUser.uid);
            const docSnap = await getDoc(userRef);
            userData = docSnap.data();

            if (userData.trialsUsed >= 5 && !userData.isPremium) {
                toggleModal('payment', true);
            } else {
                renderBookingForm();
                toggleModal('booking', true);
            }
        };

        window.submitOrder = async (e) => {
            e.preventDefault();
            const btn = document.getElementById('btn-submit-order');
            btn.innerHTML = `<i class="ph ph-spinner animate-spin"></i> Processing...`;
            
            try {
                const formData = {
                    userId: currentUser.uid,
                    userEmail: currentUser.email,
                    userName: document.getElementById('book-name').value,
                    whatsapp: document.getElementById('book-whatsapp').value,
                    category: document.getElementById('book-category').value,
                    type: document.getElementById('book-type').value,
                    description: document.getElementById('book-desc').value,
                    status: "Pending",
                    createdAt: serverTimestamp()
                };

                const software = document.getElementById('book-software');
                if (software) formData.software = software.value;
                const link = document.getElementById('book-link');
                if (link) formData.driveLink = link.value;

                await addDoc(collection(db, "orders"), formData);
                await updateDoc(doc(db, "users", currentUser.uid), {
                    trialsUsed: increment(1)
                });
                userData.trialsUsed++;
                
                toggleModal('booking', false);
                showToast("Order Placed Successfully", "success");
                navTo('dashboard');
                
            } catch (error) {
                console.error(error);
                showToast("Failed to book service.", "error");
            } finally {
                btn.innerHTML = `Confirm Booking`;
            }
        };

        window.submitPayment = async () => {
            const utr = document.getElementById('payment-utr').value;
            if(!utr) return showToast("Please enter UTR ID", "error");

            try {
                await addDoc(collection(db, "payment_requests"), {
                    userId: currentUser.uid,
                    email: currentUser.email,
                    utr: utr,
                    upiId: "9239529167@fam",
                    status: "Pending",
                    createdAt: serverTimestamp()
                });
                toggleModal('payment', false);
                showToast("Payment submitted for review.", "success");
            } catch (err) {
                showToast("Error submitting payment", "error");
            }
        };

        window.updateUserProfile = async () => {
            const newName = document.getElementById('profile-name').value;
            const selectedAvatar = document.querySelector('.avatar-option.ring-2')?.dataset.id || userData.avatarId;

            if (currentUser) {
                await updateDoc(doc(db, "users", currentUser.uid), {
                    displayName: newName,
                    avatarId: selectedAvatar
                });
                showToast("Profile Updated", "success");
            }
        }

        // --- Helpers ---
        window.copyUPI = () => {
            const upi = "9239529167@fam";
            navigator.clipboard.writeText(upi).then(() => {
                showToast("UPI ID Copied!", "success");
            }).catch(err => {
                // Fallback for iframe restrictions
                const textArea = document.createElement("textarea");
                textArea.value = upi;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand("copy");
                document.body.removeChild(textArea);
                showToast("UPI ID Copied!", "success");
            });
        };

        async function loadConfig() {
            try {
                const configDoc = await getDoc(doc(db, "app_config", "services_data"));
                if (configDoc.exists()) servicesConfig = { ...servicesConfig, ...configDoc.data() };
            } catch (e) {}
        }
        loadConfig();

        function loadUserOrders() {
            const q = query(collection(db, "orders"), where("userId", "==", currentUser.uid));
            onSnapshot(q, (snapshot) => {
                const container = document.getElementById('orders-list');
                container.innerHTML = '';
                
                if (snapshot.empty) {
                    container.innerHTML = `<div class="text-center p-6 text-slate-500 bg-glass rounded-xl border border-glass-border">No active orders found.</div>`;
                    return;
                }

                snapshot.forEach(doc => {
                    const data = doc.data();
                    let statusColor = "bg-yellow-500/10 text-yellow-400 border-yellow-500/20";
                    if(data.status === "Completed") statusColor = "bg-green-500/10 text-green-400 border-green-500/20";
                    if(data.status === "Rejected") statusColor = "bg-red-500/10 text-red-400 border-red-500/20";

                    const item = document.createElement('div');
                    item.className = "bg-glass p-4 rounded-xl border border-glass-border mb-3 backdrop-blur-sm";
                    item.innerHTML = `
                        <div class="flex justify-between items-start">
                            <div>
                                <span class="text-xs font-bold uppercase tracking-wider text-neon mb-1 block">${data.category}</span>
                                <h3 class="font-semibold text-slate-200">${data.type}</h3>
                                ${data.software ? `<p class="text-xs text-slate-400">Software: ${data.software}</p>` : ''}
                            </div>
                            <span class="px-3 py-1 rounded-full text-xs font-medium border ${statusColor}">${data.status}</span>
                        </div>
                        <div class="mt-2 text-sm text-slate-400 border-t border-slate-700/50 pt-2">
                            ${data.description.substring(0, 50)}...
                        </div>
                    `;
                    container.appendChild(item);
                });
            });
        }

        function renderBookingForm() {
            const category = document.getElementById('book-category').value;
            const dynamicArea = document.getElementById('dynamic-fields');
            dynamicArea.innerHTML = ''; 

            let types = [];
            if(category === 'Editing') types = servicesConfig.editingTypes;
            if(category === 'Designing') types = servicesConfig.designTypes;
            if(category === 'Web Development') types = servicesConfig.devTypes;

            let typeHtml = `
                <div class="space-y-1">
                    <label class="text-xs font-bold text-slate-400 uppercase">Service Type</label>
                    <select id="book-type" class="w-full bg-dark border border-slate-700 text-slate-200 rounded-lg p-3 text-sm focus:outline-none focus:border-neon transition">
                        ${types.map(t => `<option value="${t}">${t}</option>`).join('')}
                    </select>
                </div>
            `;
            dynamicArea.insertAdjacentHTML('beforeend', typeHtml);

            if (category !== 'Web Development') {
                let softHtml = `
                    <div class="space-y-1 mt-3">
                        <label class="text-xs font-bold text-slate-400 uppercase">Preferred Software</label>
                        <select id="book-software" class="w-full bg-dark border border-slate-700 text-slate-200 rounded-lg p-3 text-sm focus:outline-none focus:border-neon transition">
                            ${servicesConfig.software.map(s => `<option value="${s}">${s}</option>`).join('')}
                        </select>
                    </div>
                `;
                dynamicArea.insertAdjacentHTML('beforeend', softHtml);
            }

            if (category === 'Editing') {
                let linkHtml = `
                     <div class="space-y-1 mt-3">
                        <label class="text-xs font-bold text-slate-400 uppercase">Google Drive Link (Footage)</label>
                        <input type="url" id="book-link" placeholder="https://drive.google.com/..." class="w-full bg-dark border border-slate-700 text-slate-200 rounded-lg p-3 text-sm focus:outline-none focus:border-neon transition" required>
                    </div>
                `;
                dynamicArea.insertAdjacentHTML('beforeend', linkHtml);
            }
        }

        function updateNavUI() {
            const navAuth = document.getElementById('nav-auth');
            if (currentUser) {
                navAuth.innerHTML = `
                    <button onclick="navTo('dashboard')" class="flex items-center gap-2 bg-glass border border-glass-border text-slate-200 px-4 py-2 rounded-full font-medium hover:bg-slate-800 transition">
                        <i class="ph ph-user"></i> <span>Dashboard</span>
                    </button>
                `;
            } else {
                navAuth.innerHTML = `
                    <button onclick="toggleModal('login', true)" class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-2 rounded-full font-medium hover:shadow-lg hover:shadow-indigo-500/30 transition">
                        Login
                    </button>
                `;
            }
        }

        function updateProfileUI() {
            if(!userData) return;
            document.getElementById('profile-name').value = userData.displayName || "";
            document.getElementById('trials-count-display').innerText = `${5 - userData.trialsUsed} / 5`;
            
            const avatars = ['user', 'robot', 'alien', 'smiley', 'ghost', 'cat'];
            const container = document.getElementById('avatar-grid');
            container.innerHTML = avatars.map(av => `
                <div class="avatar-option w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center cursor-pointer border-2 ${userData.avatarId === av ? 'ring-2 ring-neon border-transparent text-neon' : 'border-transparent text-slate-500'}" 
                     data-id="${av}" onclick="selectAvatar(this)">
                    <i class="ph ph-${av} text-xl"></i>
                </div>
            `).join('');
            
            document.getElementById('dashboard-name').innerText = userData.displayName || "User";
            document.getElementById('dashboard-email').innerText = currentUser.email;
            document.getElementById('dashboard-avatar-icon').className = `ph ph-${userData.avatarId || 'user'}`;
        }

        window.navTo = (viewName) => {
            Object.values(views).forEach(el => el.classList.add('hidden'));
            views[viewName].classList.remove('hidden');
            window.scrollTo(0,0);
        };

        window.toggleModal = (name, show) => {
            const modal = modals[name];
            if (show) {
                modal.classList.remove('hidden');
                setTimeout(() => modal.firstElementChild.classList.remove('scale-90', 'opacity-0'), 10);
            } else {
                modal.firstElementChild.classList.add('scale-90', 'opacity-0');
                setTimeout(() => modal.classList.add('hidden'), 200);
            }
        };

        window.selectAvatar = (el) => {
            document.querySelectorAll('.avatar-option').forEach(d => {
                d.classList.remove('ring-2', 'ring-neon', 'text-neon');
                d.classList.add('text-slate-500');
            });
            el.classList.remove('text-slate-500');
            el.classList.add('ring-2', 'ring-neon', 'text-neon');
        }

        window.showToast = (msg, type = 'success') => {
            const toast = document.createElement('div');
            const bg = type === 'success' ? 'bg-green-500/90 text-white' : 'bg-red-500/90 text-white';
            toast.className = `fixed top-24 left-1/2 transform -translate-x-1/2 ${bg} backdrop-blur-md px-6 py-3 rounded-full shadow-2xl flex items-center gap-2 z-[60] text-sm font-medium animate-bounce-in border border-white/10`;
            toast.innerHTML = `<i class="ph ph-${type === 'success' ? 'check-circle' : 'warning-circle'} text-lg"></i> ${msg}`;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        };

        document.getElementById('book-category').addEventListener('change', renderBookingForm);
    </script>

    <style>
        body { 
            font-family: 'Outfit', sans-serif; 
            background-color: #0f172a; /* Slate 900 */
            color: #e2e8f0; /* Slate 200 */
        }
        
        /* Cyber-Glass Utilities */
        .glass-panel {
            background: rgba(30, 41, 59, 0.4); /* Darker, slightly transparent */
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
        }

        .gradient-text {
            background: linear-gradient(to right, #6366f1, #06b6d4); /* Indigo to Cyan */
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .neon-glow {
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.15);
        }

        /* 3D Floating Animations (Smoother) */
        @keyframes float {
            0% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-15px) rotate(3deg); }
            100% { transform: translateY(0px) rotate(0deg); }
        }
        .float-1 { animation: float 6s ease-in-out infinite; }
        .float-2 { animation: float 8s ease-in-out infinite reverse; }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }

        .modal-content { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
    </style>
</head>
<body class="antialiased overflow-x-hidden selection:bg-neon selection:text-black">


    <!-- Background Elements -->
    <div class="fixed inset-0 pointer-events-none z-[-1]">
        <div class="absolute top-0 left-1/4 w-96 h-96 bg-indigo-600/20 rounded-full blur-[100px]"></div>
        <div class="absolute bottom-0 right-1/4 w-96 h-96 bg-cyan-600/20 rounded-full blur-[100px]"></div>
    </div>

    <!-- Navbar -->
    <nav class="fixed top-0 w-full z-40 glass-panel border-b border-white/5">
        <div class="max-w-6xl mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center gap-3 cursor-pointer" onclick="navTo('home')">
                <div class="w-8 h-8 bg-gradient-to-br from-indigo-500 to-cyan-500 rounded-lg flex items-center justify-center text-white font-bold text-lg shadow-lg shadow-indigo-500/20">V</div>
                <span class="text-xl font-bold tracking-tight text-white">Versa</span>
            </div>
            
            <div class="hidden md:flex items-center gap-8 text-sm font-medium text-slate-400">
                <a onclick="navTo('home')" class="hover:text-neon cursor-pointer transition">Home</a>
                <a onclick="navTo('services')" class="hover:text-neon cursor-pointer transition">Services</a>
                <a onclick="navTo('contact')" class="hover:text-neon cursor-pointer transition">Contact</a>
            </div>

            <div class="flex items-center gap-4">
                <div id="nav-auth"></div>
                <button class="md:hidden text-2xl text-slate-300" onclick="document.getElementById('mobile-menu').classList.toggle('hidden')">
                    <i class="ph ph-list"></i>
                </button>
            </div>
        </div>
        
        <div id="mobile-menu" class="hidden md:hidden bg-dark border-t border-slate-800 p-4 space-y-3">
            <a onclick="navTo('home'); document.getElementById('mobile-menu').classList.add('hidden')" class="block text-slate-400 hover:text-white font-medium">Home</a>
            <a onclick="navTo('services'); document.getElementById('mobile-menu').classList.add('hidden')" class="block text-slate-400 hover:text-white font-medium">Services</a>
            <a onclick="navTo('contact'); document.getElementById('mobile-menu').classList.add('hidden')" class="block text-slate-400 hover:text-white font-medium">Contact</a>
        </div>
    </nav>

    <div class="pt-20">

        <!-- VIEW: HOME -->
        <div id="view-home">
            <section class="relative min-h-[85vh] flex items-center">
                <div class="max-w-6xl mx-auto px-4 grid md:grid-cols-2 gap-12 items-center">
                    <div class="relative z-10">
                        <div class="inline-flex items-center gap-2 px-3 py-1 bg-indigo-500/10 border border-indigo-500/20 text-indigo-300 rounded-full text-xs font-bold uppercase tracking-wide mb-6">
                            <span class="w-2 h-2 bg-indigo-500 rounded-full animate-pulse"></span>
                            Live Preview
                        </div>
                        <h1 class="text-5xl md:text-7xl font-bold leading-tight mb-6 text-white">
                            Design the <br>
                            <span class="gradient-text">Unimaginable.</span>
                        </h1>
                        <p class="text-slate-400 text-lg mb-8 max-w-lg leading-relaxed">
                            Versa delivers high-performance editing, development, and design. 
                            Experience premium agency quality with our <span class="text-neon font-semibold">5 Free Trial</span> initiative.
                        </p>
                        <div class="flex flex-wrap items-center gap-4">
                            <button onclick="navTo('services')" class="bg-white text-black px-8 py-3 rounded-full font-bold hover:bg-slate-200 transition transform hover:-translate-y-1 shadow-lg shadow-white/10">
                                Get Started
                            </button>
                            <button onclick="navTo('contact')" class="px-8 py-3 rounded-full font-semibold border border-slate-700 text-slate-300 hover:bg-slate-800 transition">
                                Contact Team
                            </button>
                        </div>
                    </div>

                    <!-- 3D Abstract Visuals -->
                    <div class="relative h-[500px] w-full hidden md:block perspective-1000">
                        <!-- Floating Cube 1 -->
                        <div class="absolute top-10 right-10 w-40 h-40 glass-panel rounded-2xl float-1 flex items-center justify-center border-t border-l border-white/20 transform rotate-12 neon-glow">
                             <i class="ph ph-video-camera text-4xl text-neon"></i>
                        </div>
                        <!-- Floating Sphere -->
                        <div class="absolute bottom-32 left-10 w-32 h-32 bg-gradient-to-tr from-indigo-600 to-purple-600 rounded-full float-2 flex items-center justify-center opacity-80 blur-sm">
                        </div>
                        <div class="absolute bottom-32 left-10 w-32 h-32 rounded-full float-2 flex items-center justify-center z-10 border border-white/20">
                             <i class="ph ph-code text-3xl text-white"></i>
                        </div>
                        
                        <!-- Floating Card -->
                        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 glass-panel p-5 rounded-xl float-1" style="animation-delay: -2s;">
                            <div class="flex justify-between items-center mb-4">
                                <div class="w-8 h-8 rounded-full bg-slate-700 animate-pulse"></div>
                                <div class="w-16 h-2 rounded-full bg-slate-700"></div>
                            </div>
                            <div class="space-y-2">
                                <div class="w-full h-2 rounded-full bg-slate-700"></div>
                                <div class="w-3/4 h-2 rounded-full bg-slate-700"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Social Proof -->
            <section class="py-20 border-t border-slate-800 bg-black/20">
                <div class="max-w-6xl mx-auto px-4">
                    <div class="flex justify-between items-end mb-12">
                        <div>
                            <h2 class="text-3xl font-bold text-white mb-2">Client Feedback</h2>
                            <p class="text-slate-500">Real results from real creators.</p>
                        </div>
                        <div class="flex gap-1 text-neon">
                            <i class="ph-fill ph-star"></i>
                            <i class="ph-fill ph-star"></i>
                            <i class="ph-fill ph-star"></i>
                            <i class="ph-fill ph-star"></i>
                            <i class="ph-fill ph-star"></i>
                        </div>
                    </div>
                    
                    <div class="grid md:grid-cols-3 gap-6">
                        <div class="glass-panel p-6 rounded-2xl hover:bg-slate-800/50 transition duration-300">
                            <p class="text-slate-300 italic mb-4 text-sm leading-relaxed">"The cinematic editing completely transformed my YouTube channel. The dark, moody color grading was exactly what I needed."</p>
                            <div class="flex items-center gap-3">
                                <div class="w-8 h-8 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-full"></div>
                                <div><p class="font-bold text-sm text-white">Rahul S.</p><p class="text-xs text-slate-500">YouTuber</p></div>
                            </div>
                        </div>
                        <div class="glass-panel p-6 rounded-2xl hover:bg-slate-800/50 transition duration-300">
                            <p class="text-slate-300 italic mb-4 text-sm leading-relaxed">"Versa delivered a full-stack e-commerce site in under a week. The UI is incredibly smooth and modern."</p>
                            <div class="flex items-center gap-3">
                                <div class="w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full"></div>
                                <div><p class="font-bold text-sm text-white">Priya M.</p><p class="text-xs text-slate-500">Founder</p></div>
                            </div>
                        </div>
                        <div class="glass-panel p-6 rounded-2xl hover:bg-slate-800/50 transition duration-300">
                            <p class="text-slate-300 italic mb-4 text-sm leading-relaxed">"Their graphic design team understands modern aesthetics. The posters were minimalist yet striking."</p>
                            <div class="flex items-center gap-3">
                                <div class="w-8 h-8 bg-gradient-to-r from-orange-500 to-red-500 rounded-full"></div>
                                <div><p class="font-bold text-sm text-white">Amit K.</p><p class="text-xs text-slate-500">Marketing Dir.</p></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- VIEW: SERVICES -->
        <div id="view-services" class="hidden min-h-screen py-10 px-4">
            <div class="max-w-6xl mx-auto">
                <div class="text-center mb-16">
                    <h2 class="text-4xl font-bold mb-4 text-white">Service Matrix</h2>
                    <p class="text-slate-400">Select a category to begin your creation process.</p>
                </div>

                <div class="grid md:grid-cols-3 gap-6">
                    <!-- Editing -->
                    <div class="group glass-panel rounded-3xl p-1 hover:border-indigo-500/50 transition duration-500">
                        <div class="h-48 bg-slate-900 rounded-t-[20px] flex items-center justify-center relative overflow-hidden">
                            <div class="absolute inset-0 bg-indigo-600/20 group-hover:bg-indigo-600/30 transition duration-500"></div>
                            <i class="ph ph-film-strip text-6xl text-indigo-400 relative z-10 group-hover:scale-110 transition duration-500"></i>
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-bold text-white mb-2">Video Editing</h3>
                            <p class="text-sm text-slate-400 mb-6">High-end post-production. Motion graphics, color grading, and sound design.</p>
                            <button onclick="initiateBooking()" class="w-full py-3 border border-indigo-500/30 text-indigo-300 rounded-xl font-medium hover:bg-indigo-600 hover:text-white transition uppercase text-xs tracking-widest">Select</button>
                        </div>
                    </div>
                    
                    <!-- Dev -->
                    <div class="group glass-panel rounded-3xl p-1 hover:border-purple-500/50 transition duration-500">
                        <div class="h-48 bg-slate-900 rounded-t-[20px] flex items-center justify-center relative overflow-hidden">
                             <div class="absolute inset-0 bg-purple-600/20 group-hover:bg-purple-600/30 transition duration-500"></div>
                            <i class="ph ph-code text-6xl text-purple-400 relative z-10 group-hover:scale-110 transition duration-500"></i>
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-bold text-white mb-2">Development</h3>
                            <p class="text-sm text-slate-400 mb-6">Robust code. Scalable web and mobile applications with modern frameworks.</p>
                            <button onclick="initiateBooking()" class="w-full py-3 border border-purple-500/30 text-purple-300 rounded-xl font-medium hover:bg-purple-600 hover:text-white transition uppercase text-xs tracking-widest">Select</button>
                        </div>
                    </div>

                    <!-- Design -->
                    <div class="group glass-panel rounded-3xl p-1 hover:border-cyan-500/50 transition duration-500">
                        <div class="h-48 bg-slate-900 rounded-t-[20px] flex items-center justify-center relative overflow-hidden">
                             <div class="absolute inset-0 bg-cyan-600/20 group-hover:bg-cyan-600/30 transition duration-500"></div>
                            <i class="ph ph-paint-brush-broad text-6xl text-cyan-400 relative z-10 group-hover:scale-110 transition duration-500"></i>
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-bold text-white mb-2">Designing</h3>
                            <p class="text-sm text-slate-400 mb-6">Visual identity. Branding, UI/UX, and marketing collateral design.</p>
                            <button onclick="initiateBooking()" class="w-full py-3 border border-cyan-500/30 text-cyan-300 rounded-xl font-medium hover:bg-cyan-600 hover:text-white transition uppercase text-xs tracking-widest">Select</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- VIEW: DASHBOARD -->
        <div id="view-dashboard" class="hidden min-h-screen py-10 px-4">
            <div class="max-w-4xl mx-auto space-y-6">
                <!-- User Header -->
                <div class="glass-panel rounded-3xl p-8 flex flex-col md:flex-row items-center gap-8 relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-64 h-64 bg-gradient-to-bl from-indigo-500/10 to-transparent rounded-bl-full pointer-events-none"></div>
                    
                    <div class="relative">
                        <div class="w-24 h-24 rounded-full bg-slate-800 border-2 border-indigo-500 flex items-center justify-center text-indigo-400 text-4xl shadow-lg shadow-indigo-500/20">
                            <i class="ph ph-user" id="dashboard-avatar-icon"></i>
                        </div>
                    </div>
                    <div class="flex-1 text-center md:text-left z-10">
                        <h2 class="text-2xl font-bold text-white mb-1" id="dashboard-name">Loading...</h2>
                        <p class="text-slate-400 text-sm mb-4" id="dashboard-email">Loading...</p>
                        <div class="flex flex-wrap justify-center md:justify-start gap-3">
                            <div class="px-3 py-1 bg-indigo-500/20 border border-indigo-500/30 text-indigo-300 rounded-full text-xs font-bold uppercase">
                                Free Tier
                            </div>
                            <div class="px-3 py-1 bg-slate-800 border border-slate-700 text-slate-300 rounded-full text-xs font-bold uppercase" id="trials-count-display">
                                Trials: ...
                            </div>
                        </div>
                    </div>
                    <button onclick="logout()" class="text-red-400 hover:text-red-300 hover:bg-red-500/10 px-4 py-2 rounded-lg text-sm font-medium transition z-10">
                        Sign Out
                    </button>
                </div>

                <!-- Settings & Orders Grid -->
                <div class="grid md:grid-cols-3 gap-6">
                    <!-- Profile Edit -->
                    <div class="md:col-span-1 glass-panel rounded-3xl p-6">
                        <h3 class="font-bold text-white text-lg mb-4">Edit Profile</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-2">Display Name</label>
                                <input type="text" id="profile-name" class="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-sm text-white focus:border-indigo-500 outline-none">
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-slate-500 uppercase mb-2">Avatar</label>
                                <div class="flex flex-wrap gap-2" id="avatar-grid"></div>
                            </div>
                            <button onclick="updateUserProfile()" class="w-full bg-slate-800 hover:bg-slate-700 text-white py-2 rounded-lg text-sm font-medium transition">Save Changes</button>
                        </div>
                    </div>

                    <!-- Order History -->
                    <div class="md:col-span-2 glass-panel rounded-3xl p-6">
                        <h3 class="font-bold text-white text-lg mb-4 flex items-center justify-between">
                            <span>History</span>
                            <i class="ph ph-clock-counter-clockwise text-slate-500"></i>
                        </h3>
                        <div id="orders-list" class="space-y-3 max-h-[400px] overflow-y-auto pr-2">
                            <!-- Populated -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- VIEW: CONTACT -->
        <div id="view-contact" class="hidden min-h-screen py-10 px-4 flex items-center justify-center">
            <div class="max-w-lg w-full glass-panel rounded-3xl p-8 relative overflow-hidden">
                <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-cyan-500"></div>
                
                <h2 class="text-3xl font-bold mb-8 text-center text-white">Get in Touch</h2>
                
                <div class="space-y-6">
                    <!-- Owner -->
                    <div class="flex items-center gap-4 p-3 rounded-xl hover:bg-slate-800/50 transition">
                        <div class="w-12 h-12 bg-slate-800 rounded-full flex items-center justify-center text-indigo-400 text-xl border border-slate-700"><i class="ph ph-user"></i></div>
                        <div>
                            <h3 class="font-bold text-white">Abdur Rahman Mallik</h3>
                            <p class="text-slate-500 text-xs uppercase tracking-wider">Owner</p>
                        </div>
                    </div>

                    <!-- Whatsapp -->
                    <a href="https://wa.me/919239529167" target="_blank" class="flex items-center gap-4 p-3 rounded-xl hover:bg-slate-800/50 transition group cursor-pointer">
                        <div class="w-12 h-12 bg-green-900/20 rounded-full flex items-center justify-center text-green-500 text-xl border border-green-500/20 group-hover:bg-green-500/20 transition"><i class="ph ph-whatsapp-logo"></i></div>
                        <div>
                            <h3 class="font-bold text-white group-hover:text-green-400 transition">WhatsApp</h3>
                            <p class="text-slate-500 text-sm">+91 9239529167</p>
                        </div>
                    </a>

        <!-- Email -->
                     <a href="mailto:Getsahay.india@gmail.com" class="flex items-center gap-4 p-3 rounded-xl hover:bg-slate-800/50 transition group cursor-pointer">
                        <div class="w-12 h-12 bg-red-900/20 rounded-full flex items-center justify-center text-red-500 text-xl border border-red-500/20 group-hover:bg-red-500/20 transition"><i class="ph ph-envelope"></i></div>
                        <div>
                            <h3 class="font-bold text-white group-hover:text-red-400 transition">Email</h3>
                            <p class="text-slate-500 text-sm">Getsahay.india@gmail.com</p>
                        </div>
                    </a>

                    <div class="grid grid-cols-3 gap-3 pt-4 border-t border-slate-700">
                        <a href="https://www.instagram.com/mallik.edittion?igsh=YXNwdm52OWxydnpz" target="_blank" class="flex flex-col items-center justify-center p-3 rounded-xl bg-slate-800 hover:bg-pink-600/20 hover:text-pink-400 transition text-slate-400">
                            <i class="ph ph-instagram-logo text-2xl mb-1"></i>
                            <span class="text-[10px] uppercase font-bold">Insta</span>
                        </a>
                        <a href="https://youtube.com/@ayatserenity-t4i?si=95L1cSpIJ32j_NzN" target="_blank" class="flex flex-col items-center justify-center p-3 rounded-xl bg-slate-800 hover:bg-red-600/20 hover:text-red-400 transition text-slate-400">
                            <i class="ph ph-youtube-logo text-2xl mb-1"></i>
                            <span class="text-[10px] uppercase font-bold">YouTube</span>
                        </a>
                        <a href="https://mallikabdurrahman37-hash.github.io/Versa-/index.html" target="_blank" class="flex flex-col items-center justify-center p-3 rounded-xl bg-slate-800 hover:bg-blue-600/20 hover:text-blue-400 transition text-slate-400">
                            <i class="ph ph-globe text-2xl mb-1"></i>
                            <span class="text-[10px] uppercase font-bold">Web</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL: LOGIN -->
    <div id="modal-login" class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm hidden">
        <div class="modal-content bg-slate-900 border border-slate-700 rounded-3xl p-8 max-w-sm w-full mx-4 shadow-2xl scale-90 opacity-0 transform">
            <div class="text-center">
                <div class="w-16 h-16 bg-gradient-to-tr from-indigo-500 to-purple-500 text-white rounded-2xl flex items-center justify-center mx-auto mb-6 text-3xl font-bold shadow-lg shadow-indigo-500/25">V</div>
                <h2 class="text-2xl font-bold mb-2 text-white">Welcome Back</h2>
                <p class="text-slate-400 text-sm mb-8">Access your dashboard and free trials.</p>
                
                <button onclick="googleLogin()" class="w-full flex items-center justify-center gap-3 bg-white text-black py-3 rounded-xl hover:bg-slate-200 transition mb-4 font-bold">
                    <i class="ph ph-google-logo text-xl text-red-500"></i>
                    Continue with Google
                </button>
                
                <button onclick="toggleModal('login', false)" class="text-slate-500 text-sm hover:text-white transition">Cancel</button>
            </div>
        </div>
    </div>

    <!-- MODAL: BOOKING -->
    <div id="modal-booking" class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm hidden">
        <div class="modal-content bg-slate-900 border border-slate-700 rounded-3xl p-6 md:p-8 max-w-lg w-full mx-4 shadow-2xl scale-90 opacity-0 transform max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl font-bold text-white">Project Details</h2>
                <button onclick="toggleModal('booking', false)"><i class="ph ph-x text-xl text-slate-400 hover:text-white"></i></button>
            </div>

            <form onsubmit="submitOrder(event)" class="space-y-4">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="text-xs font-bold text-slate-500 uppercase">Your Name</label>
                        <input type="text" id="book-name" class="w-full bg-slate-800 border border-slate-700 text-white rounded-lg p-3 text-sm focus:border-indigo-500 outline-none" required>
                    </div>
                    <div>
                        <label class="text-xs font-bold text-slate-500 uppercase">WhatsApp</label>
                        <input type="tel" id="book-whatsapp" placeholder="+91..." class="w-full bg-slate-800 border border-slate-700 text-white rounded-lg p-3 text-sm focus:border-indigo-500 outline-none" required>
                    </div>
                </div>

                <div>
                    <label class="text-xs font-bold text-slate-500 uppercase">Category</label>
                    <select id="book-category" class="w-full bg-slate-800 border border-slate-700 text-white rounded-lg p-3 text-sm focus:border-indigo-500 outline-none">
                        <option value="Editing">Video Editing</option>
                        <option value="Web Development">Web Development</option>
                        <option value="Designing">Designing</option>
                    </select>
                </div>

                <div id="dynamic-fields"></div>

                <div>
                    <label class="text-xs font-bold text-slate-500 uppercase">Requirements</label>
                    <textarea id="book-desc" rows="3" class="w-full bg-slate-800 border border-slate-700 text-white rounded-lg p-3 text-sm focus:border-indigo-500 outline-none" placeholder="Describe your vision..." required></textarea>
                </div>

                <button type="submit" id="btn-submit-order" class="w-full bg-indigo-600 text-white py-3 rounded-xl font-bold hover:bg-indigo-500 transition shadow-lg shadow-indigo-600/20">
                    Confirm Booking
                </button>
            </form>
        </div>
    </div>

    <!-- MODAL: PAYMENT (UPDATED) -->
    <div id="modal-payment" class="fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-md hidden">
        <div class="modal-content bg-slate-900 border border-amber-500/30 rounded-3xl p-8 max-w-sm w-full mx-4 shadow-2xl scale-90 opacity-0 transform text-center relative overflow-hidden">
            <!-- Glow Effect -->
            <div class="absolute -top-10 -right-10 w-32 h-32 bg-amber-500/20 rounded-full blur-3xl"></div>
            
            <div class="w-14 h-14 bg-amber-500/10 border border-amber-500/20 rounded-full flex items-center justify-center mx-auto mb-4 text-amber-500 text-2xl">
                <i class="ph-fill ph-crown"></i>
            </div>
            
            <h2 class="text-xl font-bold mb-2 text-white">Upgrade Required</h2>
            <p class="text-slate-400 text-xs mb-6">You've utilized your 5 free trials. To continue accessing premium services, please complete the payment.</p>

            <!-- QR & UPI Section -->
            <div class="bg-white p-3 rounded-xl mb-4 relative group">
                <img src="qr.png" alt="Payment QR Code" class="w-full h-48 object-contain rounded-lg" onerror="this.src='https://placehold.co/200x200/black/white?text=QR+Code'">
            </div>
            
            <!-- UPI ID Copy Section -->
            <div class="bg-slate-800 rounded-lg p-3 flex items-center justify-between mb-4 border border-slate-700">
                <div class="text-left">
                    <p class="text-[10px] text-slate-500 uppercase font-bold">UPI ID</p>
                    <p class="text-sm font-mono text-white tracking-wide">9239529167@fam</p>
                </div>
                <button onclick="copyUPI()" class="text-indigo-400 hover:text-white p-2 rounded-md hover:bg-slate-700 transition" title="Copy UPI ID">
                    <i class="ph ph-copy text-lg"></i>
                </button>
            </div>
            
            <div class="mb-4 text-left">
                <label class="text-[10px] font-bold text-slate-500 uppercase">Transaction ID (UTR)</label>
                <input type="text" id="payment-utr" placeholder="Enter 12-digit UTR" class="w-full bg-slate-800 border border-slate-700 text-white rounded-lg p-3 text-sm mt-1 focus:border-amber-500 outline-none font-mono">
            </div>

            <button onclick="submitPayment()" class="w-full bg-gradient-to-r from-amber-600 to-orange-600 text-white py-3 rounded-xl font-bold hover:brightness-110 transition shadow-lg shadow-orange-600/20">
                Verify Payment
            </button>
            <button onclick="toggleModal('payment', false)" class="mt-4 text-xs text-slate-500 hover:text-slate-300">Maybe Later</button>
        </div>
    </div>

</body>
</html>
